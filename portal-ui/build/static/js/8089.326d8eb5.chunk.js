"use strict";(self.webpackChunkportal_ui=self.webpackChunkportal_ui||[]).push([[8089],{28089:function(e,n,t){t.r(n),t.d(n,{default:function(){return U}});var s=t(70885),i=t(1413),r=t(72791),o=t(60364),a=t(11135),l=t(25787),c=t(64554),u=t(26181),d=t.n(u),f=t(61889),x=t(42649),p=t(23814),m=t(81207),h=t(42209),g=t(56087),Z=t(38442),v=t(75578),j=t(45902),b=t(84861),E=t(96389),T=t(75027),k=t(45248),S=t(80184),y=function(e){var n=e.bucketSize;return(0,S.jsxs)(c.Z,{sx:{display:"flex",alignItems:"center","& .min-icon":{height:37,width:37}},children:[(0,S.jsx)(E.Mh,{}),(0,S.jsxs)(c.Z,{sx:{display:"flex",alignItems:"flex-start",justifyContent:"center",flexFlow:"column",marginLeft:"20px",fontSize:"19px"},children:[(0,S.jsx)("label",{style:{fontWeight:600},children:"Reported Usage:"}),(0,S.jsx)("label",{children:(0,k.ae)(n)})]})]})},C=function(e){var n=e.quota;return(0,S.jsxs)(c.Z,{sx:{display:"flex",alignItems:"center","& .min-icon":{height:37,width:37}},children:[(0,S.jsx)(E.sj,{}),(0,S.jsxs)(c.Z,{sx:{display:"flex",alignItems:"flex-start",justifyContent:"center",flexFlow:"column",marginLeft:"20px",fontSize:"19px"},children:[(0,S.jsxs)("label",{style:{fontWeight:600,textTransform:"capitalize"},children:[null===n||void 0===n?void 0:n.type," Quota"]}),(0,S.jsxs)("label",{children:[" ",(0,k.ae)("".concat(null===n||void 0===n?void 0:n.quota))]})]})]})},_=(0,v.Z)(r.lazy((function(){return Promise.all([t.e(5994),t.e(5415),t.e(3772),t.e(5609),t.e(3631)]).then(t.bind(t,33690))}))),N=(0,v.Z)(r.lazy((function(){return Promise.all([t.e(5994),t.e(5415),t.e(7391),t.e(3772),t.e(1520),t.e(7584)]).then(t.bind(t,1604))}))),I=(0,v.Z)(r.lazy((function(){return Promise.all([t.e(5994),t.e(5415),t.e(7391),t.e(3772),t.e(8391)]).then(t.bind(t,18391))}))),P=(0,v.Z)(r.lazy((function(){return Promise.all([t.e(3772),t.e(402)]).then(t.bind(t,70402))}))),B=(0,v.Z)(r.lazy((function(){return Promise.all([t.e(1918),t.e(1705)]).then(t.bind(t,71705))}))),O=(0,v.Z)(r.lazy((function(){return Promise.all([t.e(5994),t.e(5415),t.e(7391),t.e(3772),t.e(1520),t.e(7591),t.e(1581)]).then(t.bind(t,1581))}))),R={display:"grid",gridTemplateColumns:{xs:"1fr",sm:"2fr 1fr"},gridAutoFlow:{xs:"dense",sm:"row"},gap:2},F=(0,o.$j)((function(e){return{session:e.console.session,distributedSetup:e.system.distributedSetup,loadingBucket:e.buckets.bucketDetails.loadingBucket,bucketInfo:e.buckets.bucketDetails.bucketInfo}}),{setErrorSnackMessage:x.Ih,setBucketDetailsLoad:h.d5}),U=(0,l.Z)((function(e){return(0,a.Z)((0,i.Z)((0,i.Z)({},p.bK),p.VI))}))(F((function(e){var n=e.classes,t=e.match,o=e.distributedSetup,a=e.setErrorSnackMessage,l=e.loadingBucket,u=e.bucketInfo,x=e.setBucketDetailsLoad,p=(0,r.useState)(null),h=(0,s.Z)(p,2),v=h[0],k=h[1],F=(0,r.useState)("0"),U=(0,s.Z)(F,2),G=U[0],A=U[1],L=(0,r.useState)(!1),w=(0,s.Z)(L,2),M=w[0],D=w[1],z=(0,r.useState)(!1),K=(0,s.Z)(z,2),V=K[0],Y=K[1],q=(0,r.useState)(!1),Q=(0,s.Z)(q,2),W=Q[0],$=Q[1],J=(0,r.useState)(!0),H=(0,s.Z)(J,2),X=H[0],ee=H[1],ne=(0,r.useState)(!0),te=(0,s.Z)(ne,2),se=te[0],ie=te[1],re=(0,r.useState)(!0),oe=(0,s.Z)(re,2),ae=oe[0],le=oe[1],ce=(0,r.useState)(!0),ue=(0,s.Z)(ce,2),de=ue[0],fe=ue[1],xe=(0,r.useState)(!0),pe=(0,s.Z)(xe,2),me=pe[0],he=pe[1],ge=(0,r.useState)(!0),Ze=(0,s.Z)(ge,2),ve=Ze[0],je=Ze[1],be=(0,r.useState)(!0),Ee=(0,s.Z)(be,2),Te=Ee[0],ke=Ee[1],Se=(0,r.useState)(!0),ye=(0,s.Z)(Se,2),Ce=ye[0],_e=ye[1],Ne=(0,r.useState)(!1),Ie=(0,s.Z)(Ne,2),Pe=Ie[0],Be=Ie[1],Oe=(0,r.useState)(!1),Re=(0,s.Z)(Oe,2),Fe=Re[0],Ue=Re[1],Ge=(0,r.useState)(null),Ae=(0,s.Z)(Ge,2),Le=Ae[0],we=Ae[1],Me=(0,r.useState)(!1),De=(0,s.Z)(Me,2),ze=De[0],Ke=De[1],Ve=(0,r.useState)(!1),Ye=(0,s.Z)(Ve,2),qe=Ye[0],Qe=Ye[1],We=(0,r.useState)(null),$e=(0,s.Z)(We,2),Je=$e[0],He=$e[1],Xe=(0,r.useState)(!1),en=(0,s.Z)(Xe,2),nn=en[0],tn=en[1],sn=(0,r.useState)(!1),rn=(0,s.Z)(sn,2),on=rn[0],an=rn[1],ln=(0,r.useState)(!1),cn=(0,s.Z)(ln,2),un=cn[0],dn=cn[1],fn=(0,r.useState)(!1),xn=(0,s.Z)(fn,2),pn=xn[0],mn=xn[1],hn=t.params.bucketName,gn="n/a",Zn="";null!==u&&(gn=u.access,Zn=u.definition);var vn=(0,Z.F)(hn,[g.Ft.S3_GET_BUCKET_OBJECT_LOCK_CONFIGURATION]),jn=(0,Z.F)(hn,[g.Ft.S3_GET_BUCKET_ENCRYPTION_CONFIGURATION]),bn=(0,Z.F)(hn,[g.Ft.ADMIN_GET_BUCKET_QUOTA]);(0,r.useEffect)((function(){le(!!l)}),[l,le]),(0,r.useEffect)((function(){de&&(jn?m.Z.invoke("GET","/api/v1/buckets/".concat(hn,"/encryption/info")).then((function(e){e.algorithm&&(Ke(!0),k(e)),fe(!1)})).catch((function(e){"The server side encryption configuration was not found"===e.errorMessage&&(Ke(!1),k(null)),fe(!1)})):(Ke(!1),k(null),fe(!1)))}),[de,hn,jn]),(0,r.useEffect)((function(){me&&o&&m.Z.invoke("GET","/api/v1/buckets/".concat(hn,"/versioning")).then((function(e){Be(e.is_versioned),he(!1)})).catch((function(e){a(e),he(!1)}))}),[me,a,hn,o]),(0,r.useEffect)((function(){ve&&o&&(bn?m.Z.invoke("GET","/api/v1/buckets/".concat(hn,"/quota")).then((function(e){we(e),e.quota?Ue(!0):Ue(!1),je(!1)})).catch((function(e){a(e),Ue(!1),je(!1)})):(Ue(!1),je(!1)))}),[ve,he,a,hn,o,bn]),(0,r.useEffect)((function(){me&&o&&(vn?m.Z.invoke("GET","/api/v1/buckets/".concat(hn,"/object-locking")).then((function(e){D(e.object_locking_enabled),ee(!1)})).catch((function(e){a(e),ee(!1)})):ee(!1))}),[X,a,hn,me,o,vn]),(0,r.useEffect)((function(){se&&m.Z.invoke("GET","/api/v1/buckets").then((function(e){var n=d()(e,"buckets",[]).find((function(e){return e.name===hn})),t=d()(n,"size","0");ie(!1),A(t)})).catch((function(e){ie(!1),a(e)}))}),[se,a,hn]),(0,r.useEffect)((function(){Te&&o&&m.Z.invoke("GET","/api/v1/buckets/".concat(hn,"/replication")).then((function(e){var n=e.rules?e.rules:[];$(n.length>0),ke(!1)})).catch((function(e){a(e),ke(!1)}))}),[Te,a,hn,o]),(0,r.useEffect)((function(){Ce&&M&&m.Z.invoke("GET","/api/v1/buckets/".concat(hn,"/retention")).then((function(e){_e(!1),Qe(!0),He(e)})).catch((function(e){Qe(!1),_e(!1),He(null)}))}),[Ce,M,hn]);var En=function(){x(!0),le(!0),ie(!0),he(!0),fe(!0),_e(!0)};return(0,S.jsxs)(r.Fragment,{children:[on&&(0,S.jsx)(I,{open:on,selectedBucket:hn,encryptionEnabled:ze,encryptionCfg:v,closeModalAndRefresh:function(){an(!1),fe(!0)}}),un&&(0,S.jsx)(O,{open:un,selectedBucket:hn,enabled:Fe,cfg:Le,closeModalAndRefresh:function(){dn(!1),je(!0)}}),V&&(0,S.jsx)(_,{bucketName:hn,open:V,actualPolicy:gn,actualDefinition:Zn,closeModalAndRefresh:function(){Y(!1),En()}}),nn&&(0,S.jsx)(N,{bucketName:hn,open:nn,closeModalAndRefresh:function(){tn(!1),En()}}),pn&&(0,S.jsx)(P,{closeVersioningModalAndRefresh:function(e){mn(!1),e&&En()},modalOpen:pn,selectedBucket:hn,versioningCurrentState:Pe}),(0,S.jsx)(f.ZP,{container:!0,children:(0,S.jsx)(f.ZP,{item:!0,xs:12,className:n.spacerBottom,children:(0,S.jsx)("h3",{style:{marginTop:"0",marginBottom:"0"},children:"Summary"})})}),(0,S.jsx)(Z.s,{scopes:[g.Ft.S3_GET_BUCKET_POLICY],resource:hn,children:(0,S.jsxs)(c.Z,{sx:(0,i.Z)({},R),children:[(0,S.jsxs)(c.Z,{sx:(0,i.Z)({},R),children:[(0,S.jsx)(Z.s,{scopes:[g.Ft.S3_GET_BUCKET_POLICY],resource:hn,children:(0,S.jsx)(T.default,{iamScopes:[g.Ft.S3_PUT_BUCKET_POLICY],resourceName:hn,property:"Access Policy:",value:gn.toLowerCase(),onEdit:function(){Y(!0)},isLoading:ae})}),(0,S.jsx)(Z.s,{scopes:[g.Ft.S3_GET_BUCKET_ENCRYPTION_CONFIGURATION],resource:hn,children:(0,S.jsx)(T.default,{iamScopes:[g.Ft.S3_PUT_BUCKET_ENCRYPTION_CONFIGURATION],resourceName:hn,property:"Encryption:",value:ze?"Enabled":"Disabled",onEdit:function(){an(!0)},isLoading:de})}),(0,S.jsx)(Z.s,{scopes:[g.Ft.S3_GET_REPLICATION_CONFIGURATION],resource:hn,children:(0,S.jsx)(j.default,{label:"Replication:",value:(0,S.jsx)(b.Z,{icon:W?(0,S.jsx)(E.E3,{}):(0,S.jsx)(E.dR,{}),label:(0,S.jsx)("label",{className:n.textMuted,children:W?"Enabled":"Disabled"})})})}),(0,S.jsx)(Z.s,{scopes:[g.Ft.S3_GET_BUCKET_OBJECT_LOCK_CONFIGURATION],resource:hn,children:(0,S.jsx)(j.default,{label:"Object Locking:",value:(0,S.jsx)(b.Z,{icon:M?(0,S.jsx)(E.E3,{}):(0,S.jsx)(E.dR,{}),label:(0,S.jsx)("label",{className:n.textMuted,children:M?"Enabled":"Disabled"})})})}),(0,S.jsx)(c.Z,{className:n.spacerTop,children:(0,S.jsx)(j.default,{label:"Tags:",value:(0,S.jsx)(B,{setErrorSnackMessage:a,bucketName:hn})})})]}),(0,S.jsx)(c.Z,{sx:{display:"grid",gridTemplateColumns:"1fr",alignItems:"flex-start"},children:(0,S.jsx)(y,{bucketSize:G})})]})}),o&&(0,S.jsxs)(Z.s,{scopes:[g.Ft.S3_GET_BUCKET_VERSIONING],resource:hn,children:[(0,S.jsx)(f.ZP,{container:!0,children:(0,S.jsx)(f.ZP,{item:!0,xs:12,className:n.spacerBottom,children:(0,S.jsx)("h3",{style:{marginTop:"25px",marginBottom:"0"},children:"Versioning"})})}),(0,S.jsxs)(c.Z,{sx:(0,i.Z)({},R),children:[(0,S.jsxs)(c.Z,{sx:(0,i.Z)({},R),children:[(0,S.jsx)(T.default,{iamScopes:[g.Ft.S3_PUT_BUCKET_VERSIONING],resourceName:hn,property:"Versioning:",value:Pe?"Enabled":"Disabled",onEdit:function(){mn(!0)},isLoading:me}),(0,S.jsx)(T.default,{iamScopes:[g.Ft.ADMIN_SET_BUCKET_QUOTA],resourceName:hn,property:"Quota:",value:Fe?"Enabled":"Disabled",onEdit:function(){dn(!0)},isLoading:ve})]}),(0,S.jsx)(c.Z,{sx:{display:"grid",gridTemplateColumns:"1fr",alignItems:"flex-start"},children:Fe&&Le?(0,S.jsx)(C,{quota:Le}):null})]})]}),M&&(0,S.jsxs)(Z.s,{scopes:[g.Ft.S3_GET_OBJECT_RETENTION],resource:hn,children:[(0,S.jsx)(f.ZP,{container:!0,children:(0,S.jsx)(f.ZP,{item:!0,xs:12,className:n.spacerBottom,children:(0,S.jsx)("h3",{style:{marginTop:"25px",marginBottom:"0"},children:"Retention"})})}),(0,S.jsxs)(c.Z,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"2fr 1fr"},gridAutoFlow:{xs:"dense",sm:"row"},gap:2},children:[(0,S.jsxs)(c.Z,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"2fr 1fr"},gridAutoFlow:{xs:"dense",sm:"row"},gap:2},children:[(0,S.jsx)(T.default,{iamScopes:[g.Ft.ADMIN_SET_BUCKET_QUOTA],resourceName:hn,property:"Retention:",value:qe?"Enabled":"Disabled",onEdit:function(){tn(!0)},isLoading:Ce}),(0,S.jsx)(j.default,{label:"Mode:",value:(0,S.jsx)("label",{className:n.textMuted,style:{textTransform:"capitalize"},children:Je&&Je.mode?Je.mode:"-"})}),(0,S.jsx)(j.default,{label:"Validity:",value:(0,S.jsxs)("label",{className:n.textMuted,style:{textTransform:"capitalize"},children:[Je&&Je.validity," ",Je&&(1===Je.validity?Je.unit.slice(0,-1):Je.unit)]})})]}),(0,S.jsx)(c.Z,{sx:{display:"grid",gridTemplateColumns:"1fr",alignItems:"flex-start"}})]})]})]})})))},75027:function(e,n,t){t.r(n),t.d(n,{default:function(){return j}});var s=t(1413),i=(t(72791),t(45902)),r=t(38442),o=t(45987),a=t(36151),l=t(13239),c=t(80184),u=["isLoading","onClick","label"],d=function(e){var n=e.isLoading,t=e.onClick,i=e.label,r=(0,o.Z)(e,u);return(0,c.jsx)(a.Z,(0,s.Z)((0,s.Z)({color:"primary",onClick:t,variant:"text",sx:{padding:0,margin:0,alignItems:"flex-start",justifyContent:"flex-start",display:"inline-flex",height:"auto",textDecoration:"underline",color:"#2781B0","&:hover":{background:"#ffffff",textDecoration:"underline"}},disableRipple:!0,disableFocusRipple:!0},r),{},{children:n?(0,c.jsx)(l.Z,{color:"primary",size:16,variant:"indeterminate"}):i}))},f=t(64554),x=t(13400),p=t(33548),m=t(11135),h=t(25787),g=["disabled","onClick"],Z=(0,h.Z)((function(e){return(0,m.Z)({root:{"&:hover":{backgroundColor:"#E2E2E2"}}})}))((function(e){var n=e.disabled,t=e.onClick,i=(0,o.Z)(e,g);return(0,c.jsx)(x.Z,(0,s.Z)((0,s.Z)({size:"small",disabled:n,onClick:t},i),{},{children:(0,c.jsx)(p.Z,{})}))})),v=function(e){var n=e.resourceName,t=e.iamScopes,i=e.secureCmpProps,o=void 0===i?{}:i,a=e.children;return(0,c.jsx)(r.s,(0,s.Z)((0,s.Z)({scopes:t,resource:n,errorProps:{disabled:!0}},o),{},{children:a}))},j=function(e){var n=e.isLoading,t=void 0===n||n,s=e.resourceName,r=void 0===s?"":s,o=e.iamScopes,a=e.secureCmpProps,l=void 0===a?{}:a,u=e.property,x=void 0===u?null:u,p=e.value,m=void 0===p?null:p,h=e.onEdit;return(0,c.jsxs)(f.Z,{sx:{display:"flex",alignItems:"baseline",justifyContent:"flex-start"},children:[(0,c.jsx)(i.default,{label:x,value:(0,c.jsx)(v,{resourceName:r,iamScopes:o,secureCmpProps:l,children:(0,c.jsx)(d,{isLoading:t,onClick:h,label:m})})}),(0,c.jsx)(v,{resourceName:r,iamScopes:o,secureCmpProps:l,children:(0,c.jsx)(Z,{onClick:h,sx:{background:"#f8f8f8",marginLeft:"3px",top:3,"& .min-icon":{width:"16px",height:"16px"}}})})]})}},84861:function(e,n,t){t(72791);var s=t(64554),i=t(80184);n.Z=function(e){var n=e.icon,t=void 0===n?null:n,r=e.label,o=void 0===r?null:r;return(0,i.jsxs)(s.Z,{sx:{display:"flex"},children:[(0,i.jsx)("div",{style:{height:16,width:16,display:"flex",alignItems:"center",marginTop:5},children:t}),(0,i.jsx)("div",{style:{marginLeft:t?5:"none"},children:o})]})}},45902:function(e,n,t){t.r(n);var s=t(1413),i=(t(72791),t(53767)),r=t(80184);n.default=function(e){var n=e.label,t=void 0===n?null:n,o=e.value,a=void 0===o?"-":o,l=e.orientation,c=void 0===l?"column":l,u=e.stkProps,d=void 0===u?{}:u,f=e.lblProps,x=void 0===f?{}:f,p=e.valProps,m=void 0===p?{}:p;return(0,r.jsxs)(i.Z,(0,s.Z)((0,s.Z)({direction:{xs:"column",sm:c}},d),{},{children:[(0,r.jsx)("label",(0,s.Z)((0,s.Z)({style:{marginRight:5,fontWeight:600}},x),{},{children:t})),(0,r.jsx)("label",(0,s.Z)((0,s.Z)({style:{marginRight:5,fontWeight:500}},m),{},{children:a}))]}))}},53767:function(e,n,t){var s=t(4942),i=t(63366),r=t(87462),o=t(72791),a=t(51184),l=t(45682),c=t(78519),u=t(82466),d=t(47630),f=t(93736),x=t(80184),p=["component","direction","spacing","divider","children"];function m(e,n){var t=o.Children.toArray(e).filter(Boolean);return t.reduce((function(e,s,i){return e.push(s),i<t.length-1&&e.push(o.cloneElement(n,{key:"separator-".concat(i)})),e}),[])}var h=(0,d.ZP)("div",{name:"MuiStack",slot:"Root",overridesResolver:function(e,n){return[n.root]}})((function(e){var n=e.ownerState,t=e.theme,i=(0,r.Z)({display:"flex"},(0,a.k9)({theme:t},(0,a.P$)({values:n.direction,breakpoints:t.breakpoints.values}),(function(e){return{flexDirection:e}})));if(n.spacing){var o=(0,l.hB)(t),c=Object.keys(t.breakpoints.values).reduce((function(e,t){return null==n.spacing[t]&&null==n.direction[t]||(e[t]=!0),e}),{}),d=(0,a.P$)({values:n.direction,base:c}),f=(0,a.P$)({values:n.spacing,base:c});i=(0,u.Z)(i,(0,a.k9)({theme:t},f,(function(e,t){return{"& > :not(style) + :not(style)":(0,s.Z)({margin:0},"margin".concat((i=t?d[t]:n.direction,{row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"}[i])),(0,l.NA)(o,e))};var i})))}return i})),g=o.forwardRef((function(e,n){var t=(0,f.Z)({props:e,name:"MuiStack"}),s=(0,c.Z)(t),o=s.component,a=void 0===o?"div":o,l=s.direction,u=void 0===l?"column":l,d=s.spacing,g=void 0===d?0:d,Z=s.divider,v=s.children,j=(0,i.Z)(s,p),b={direction:u,spacing:g};return(0,x.jsx)(h,(0,r.Z)({as:a,ownerState:b,ref:n},j,{children:Z?m(v,Z):v}))}));n.Z=g}}]);
//# sourceMappingURL=8089.326d8eb5.chunk.js.map