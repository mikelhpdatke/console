"use strict";(self.webpackChunkportal_ui=self.webpackChunkportal_ui||[]).push([[4738],{84738:function(e,n,t){t.r(n);var c=t(70885),s=t(1413),a=t(72791),i=t(60364),o=t(10703),r=t(18073),l=t(43896),u=t(42649),d=t(19847),f=t(92983),S=t(81207),I=t(62666),b=t(56087),p=t(60680),h=t(38442),m=t(11135),_=t(23814),Z=t(25787),k=t(80184),x=(0,i.$j)((function(e){return{session:e.console.session,loadingBucket:e.buckets.bucketDetails.loadingBucket,bucketInfo:e.buckets.bucketDetails.bucketInfo}}),{setErrorSnackMessage:u.Ih});function F(e){return{id:"simple-tab-".concat(e),"aria-controls":"simple-tabpanel-".concat(e)}}n.default=(0,Z.Z)((function(e){return(0,m.Z)((0,s.Z)({},_.VX))}))(x((function(e){var n=e.match,t=e.setErrorSnackMessage,i=e.loadingBucket,u=e.classes,m=(0,a.useState)(0),_=(0,c.Z)(m,2),Z=_[0],x=_[1],E=(0,a.useState)(!0),v=(0,c.Z)(E,2),A=v[0],N=v[1],g=(0,a.useState)([]),j=(0,c.Z)(g,2),L=j[0],C=j[1],T=(0,a.useState)(!0),D=(0,c.Z)(T,2),M=D[0],y=D[1],P=(0,a.useState)([]),U=(0,c.Z)(P,2),R=U[0],B=U[1],G=n.params.bucketName,O=(0,h.F)(G,[b.Ft.ADMIN_LIST_USER_POLICIES]),w=(0,h.F)(G,[b.Ft.ADMIN_GET_POLICY,b.Ft.ADMIN_LIST_USERS,b.Ft.ADMIN_LIST_GROUPS],!0),K=(0,h.F)(b.C3,[b.Ft.ADMIN_GET_USER]),Y=(0,h.F)(b.C3,[b.Ft.ADMIN_GET_POLICY,b.Ft.ADMIN_LIST_USERS,b.Ft.ADMIN_LIST_GROUPS]);(0,a.useEffect)((function(){i&&(y(!0),N(!0))}),[i,y,N]);var z=[{type:"view",disableButtonFunction:function(){return!Y},onClick:function(e){I.Z.push("".concat(b.gA.POLICIES,"/").concat(e.name))}}],V=[{type:"view",disableButtonFunction:function(){return!K},onClick:function(e){I.Z.push("".concat(b.gA.USERS,"/").concat(e))}}];return(0,a.useEffect)((function(){M&&(w?S.Z.invoke("GET","/api/v1/bucket-users/".concat(G)).then((function(e){B(e),y(!1)})).catch((function(e){t(e),y(!1)})):y(!1))}),[M,t,G,w]),(0,a.useEffect)((function(){A&&(O?S.Z.invoke("GET","/api/v1/bucket-policy/".concat(G)).then((function(e){C(e.policies),N(!1)})).catch((function(e){t(e),N(!1)})):N(!1))}),[A,t,G,O]),(0,k.jsxs)(a.Fragment,{children:[(0,k.jsx)(p.Z,{children:"Access Audit"}),(0,k.jsxs)(r.Z,{value:Z,onChange:function(e,n){x(n)},indicatorColor:"primary",textColor:"primary","aria-label":"cluster-tabs",variant:"scrollable",scrollButtons:"auto",children:[O&&(0,k.jsx)(l.Z,(0,s.Z)({label:"Policies"},F(0))),w&&(0,k.jsx)(l.Z,(0,s.Z)({label:"Users"},F(1)))]}),(0,k.jsxs)(o.Z,{className:u.tableBlock,children:[(0,k.jsx)(d.x,{index:0,value:Z,children:(0,k.jsx)(h.s,{scopes:[b.Ft.ADMIN_LIST_USER_POLICIES],resource:G,errorProps:{disabled:!0},children:(0,k.jsx)(f.Z,{noBackground:!0,itemActions:z,columns:[{label:"Name",elementKey:"name"}],isLoading:A,records:L,entityName:"Policies",idField:"name"})})}),(0,k.jsx)(d.x,{index:1,value:Z,children:(0,k.jsx)(h.s,{scopes:[b.Ft.ADMIN_GET_POLICY,b.Ft.ADMIN_LIST_USERS,b.Ft.ADMIN_LIST_GROUPS],resource:G,matchAll:!0,errorProps:{disabled:!0},children:(0,k.jsx)(f.Z,{noBackground:!0,itemActions:V,columns:[{label:"User",elementKey:"accessKey"}],isLoading:M,records:R,entityName:"Users",idField:"accessKey"})})})]})]})})))},60680:function(e,n,t){t(72791);var c=t(11135),s=t(25787),a=t(80184);n.Z=(0,s.Z)((function(e){return(0,c.Z)({root:{padding:0,margin:0,fontSize:".9rem"}})}))((function(e){var n=e.classes,t=e.children;return(0,a.jsx)("h1",{className:n.root,children:t})}))},19847:function(e,n,t){t.d(n,{x:function(){return r}});var c=t(1413),s=t(45987),a=t(72791),i=t(80184),o=["children","value","index"],r=function(e){var n=e.children,t=e.value,r=e.index,l=(0,s.Z)(e,o);return(0,i.jsx)("div",(0,c.Z)((0,c.Z)({role:"tabpanel",hidden:t!==r,id:"simple-tabpanel-".concat(r),"aria-labelledby":"simple-tab-".concat(r),style:{marginTop:"5px"}},l),{},{children:t===r&&(0,i.jsx)(a.Fragment,{children:n})}))}}}]);
//# sourceMappingURL=4738.7fbe3e07.chunk.js.map