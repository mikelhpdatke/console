{"version":3,"file":"static/js/5702.a3741fa5.chunk.js","mappings":"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","sources":["common/HelpBox.tsx","screens/Console/Buckets/BucketDetails/BucketEventsPanel.tsx","screens/Console/Common/PanelTitle/PanelTitle.tsx"],"sourcesContent":["// This file is part of MinIO Console Server\n// Copyright (c) 2021 MinIO, Inc.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport React from \"react\";\nimport { Theme } from \"@mui/material/styles\";\nimport createStyles from \"@mui/styles/createStyles\";\nimport withStyles from \"@mui/styles/withStyles\";\nimport Grid from \"@mui/material/Grid\";\n\nconst styles = (theme: Theme) =>\n  createStyles({\n    root: {\n      border: \"1px solid #E2E2E2\",\n      borderRadius: 2,\n      backgroundColor: \"#FBFAFA\",\n      paddingLeft: 25,\n      paddingTop: 31,\n      paddingBottom: 21,\n      paddingRight: 30,\n    },\n    leftItems: {\n      fontSize: 16,\n      fontWeight: \"bold\",\n      marginBottom: 15,\n      display: \"flex\",\n      alignItems: \"center\",\n      \"& .min-icon\": {\n        marginRight: 15,\n        height: 28,\n        width: 38,\n      },\n    },\n    helpText: {\n      fontSize: 16,\n      paddingLeft: 5,\n    },\n  });\n\ninterface IHelpBox {\n  classes: any;\n  iconComponent: any;\n  title: string;\n  help: any;\n}\n\nconst HelpBox = ({ classes, iconComponent, title, help }: IHelpBox) => {\n  return (\n    <div className={classes.root}>\n      <Grid container>\n        <Grid item xs={12} className={classes.leftItems}>\n          {iconComponent}\n          {title}\n        </Grid>\n        <Grid item xs={12} className={classes.helpText}>\n          {help}\n        </Grid>\n      </Grid>\n    </div>\n  );\n};\n\nexport default withStyles(styles)(HelpBox);\n","// This file is part of MinIO Console Server\n// Copyright (c) 2021 MinIO, Inc.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport React, { Fragment, useEffect, useState } from \"react\";\nimport { connect } from \"react-redux\";\nimport { Theme } from \"@mui/material/styles\";\nimport createStyles from \"@mui/styles/createStyles\";\nimport withStyles from \"@mui/styles/withStyles\";\nimport get from \"lodash/get\";\nimport Grid from \"@mui/material/Grid\";\nimport AddIcon from \"../../../../icons/AddIcon\";\nimport LambdaIcon from \"../../../../icons/LambdaIcon\";\nimport { BucketEvent, BucketEventList, BucketInfo } from \"../types\";\nimport { setErrorSnackMessage } from \"../../../../actions\";\nimport { AppState } from \"../../../../store\";\nimport {\n  actionsTray,\n  searchField,\n} from \"../../Common/FormComponents/common/styleLibrary\";\nimport { ErrorResponseHandler } from \"../../../../common/types\";\nimport TableWrapper from \"../../Common/TableWrapper/TableWrapper\";\nimport api from \"../../../../common/api\";\n\nimport HelpBox from \"../../../../common/HelpBox\";\nimport PanelTitle from \"../../Common/PanelTitle/PanelTitle\";\nimport {\n  SecureComponent,\n  hasPermission,\n} from \"../../../../common/SecureComponent\";\nimport { IAM_SCOPES } from \"../../../../common/SecureComponent/permissions\";\n\nimport withSuspense from \"../../Common/Components/withSuspense\";\nimport RBIconButton from \"./SummaryItems/RBIconButton\";\n\nconst DeleteEvent = withSuspense(React.lazy(() => import(\"./DeleteEvent\")));\nconst AddEvent = withSuspense(React.lazy(() => import(\"./AddEvent\")));\n\nconst styles = (theme: Theme) =>\n  createStyles({\n    ...searchField,\n    ...actionsTray,\n    twHeight: {\n      minHeight: 400,\n    },\n  });\n\ninterface IBucketEventsProps {\n  classes: any;\n  match: any;\n  setErrorSnackMessage: typeof setErrorSnackMessage;\n  loadingBucket: boolean;\n  bucketInfo: BucketInfo | null;\n}\n\nconst BucketEventsPanel = ({\n  classes,\n  match,\n  setErrorSnackMessage,\n  loadingBucket,\n  bucketInfo,\n}: IBucketEventsProps) => {\n  const [addEventScreenOpen, setAddEventScreenOpen] = useState<boolean>(false);\n  const [loadingEvents, setLoadingEvents] = useState<boolean>(true);\n  const [records, setRecords] = useState<BucketEvent[]>([]);\n  const [deleteOpen, setDeleteOpen] = useState<boolean>(false);\n  const [selectedEvent, setSelectedEvent] = useState<BucketEvent | null>(null);\n\n  const bucketName = match.params[\"bucketName\"];\n\n  const displayEvents = hasPermission(bucketName, [\n    IAM_SCOPES.S3_GET_BUCKET_NOTIFICATIONS,\n  ]);\n\n  useEffect(() => {\n    if (loadingBucket) {\n      setLoadingEvents(true);\n    }\n  }, [loadingBucket, setLoadingEvents]);\n\n  useEffect(() => {\n    if (loadingEvents) {\n      if (displayEvents) {\n        api\n          .invoke(\"GET\", `/api/v1/buckets/${bucketName}/events`)\n          .then((res: BucketEventList) => {\n            const events = get(res, \"events\", []);\n            setLoadingEvents(false);\n            setRecords(events || []);\n          })\n          .catch((err: ErrorResponseHandler) => {\n            setLoadingEvents(false);\n            setErrorSnackMessage(err);\n          });\n      } else {\n        setLoadingEvents(false);\n      }\n    }\n  }, [loadingEvents, setErrorSnackMessage, bucketName, displayEvents]);\n\n  const eventsDisplay = (events: string[]) => {\n    return <Fragment>{events.join(\", \")}</Fragment>;\n  };\n\n  const confirmDeleteEvent = (evnt: BucketEvent) => {\n    setDeleteOpen(true);\n    setSelectedEvent(evnt);\n  };\n\n  const closeAddEventAndRefresh = () => {\n    setAddEventScreenOpen(false);\n    setLoadingEvents(true);\n  };\n\n  const closeDeleteModalAndRefresh = (refresh: boolean) => {\n    setDeleteOpen(false);\n    if (refresh) {\n      setLoadingEvents(true);\n    }\n  };\n\n  const tableActions = [{ type: \"delete\", onClick: confirmDeleteEvent }];\n\n  return (\n    <Fragment>\n      {deleteOpen && (\n        <DeleteEvent\n          deleteOpen={deleteOpen}\n          selectedBucket={bucketName}\n          bucketEvent={selectedEvent}\n          closeDeleteModalAndRefresh={closeDeleteModalAndRefresh}\n        />\n      )}\n      {addEventScreenOpen && (\n        <AddEvent\n          open={addEventScreenOpen}\n          selectedBucket={bucketName}\n          closeModalAndRefresh={closeAddEventAndRefresh}\n        />\n      )}\n\n      <Grid container>\n        <Grid item xs={12} className={classes.actionsTray}>\n          <PanelTitle>Events</PanelTitle>\n          <SecureComponent\n            scopes={[\n              IAM_SCOPES.S3_PUT_BUCKET_NOTIFICATIONS,\n              IAM_SCOPES.ADMIN_SERVER_INFO,\n            ]}\n            resource={bucketName}\n            matchAll\n            errorProps={{ disabled: true }}\n          >\n            <RBIconButton\n              tooltip={\"Subscribe to Event\"}\n              onClick={() => {\n                setAddEventScreenOpen(true);\n              }}\n              text={\"Subscribe to Event\"}\n              icon={<AddIcon />}\n              color=\"primary\"\n              variant={\"contained\"}\n            />\n          </SecureComponent>\n        </Grid>\n        <Grid item xs={12}>\n          <SecureComponent\n            scopes={[IAM_SCOPES.S3_GET_BUCKET_NOTIFICATIONS]}\n            resource={bucketName}\n            errorProps={{ disabled: true }}\n          >\n            <TableWrapper\n              itemActions={tableActions}\n              columns={[\n                { label: \"SQS\", elementKey: \"arn\" },\n                {\n                  label: \"Events\",\n                  elementKey: \"events\",\n                  renderFunction: eventsDisplay,\n                },\n                { label: \"Prefix\", elementKey: \"prefix\" },\n                { label: \"Suffix\", elementKey: \"suffix\" },\n              ]}\n              isLoading={loadingEvents}\n              records={records}\n              entityName=\"Events\"\n              idField=\"id\"\n              customPaperHeight={classes.twHeight}\n            />\n          </SecureComponent>\n        </Grid>\n        {!loadingEvents && (\n          <Grid item xs={12}>\n            <HelpBox\n              title={\"Lambda Notifications\"}\n              iconComponent={<LambdaIcon />}\n              help={\n                <Fragment>\n                  MinIO bucket notifications allow administrators to send\n                  notifications to supported external services on certain object\n                  or bucket events. MinIO supports bucket and object-level S3\n                  events similar to the Amazon S3 Event Notifications.\n                  <br />\n                  <br />\n                  You can learn more at our{\" \"}\n                  <a\n                    href=\"https://docs.min.io/minio/baremetal/monitoring/bucket-notifications/bucket-notifications.html?ref=con\"\n                    target=\"_blank\"\n                    rel=\"noreferrer\"\n                  >\n                    documentation\n                  </a>\n                  .\n                </Fragment>\n              }\n            />\n          </Grid>\n        )}\n      </Grid>\n    </Fragment>\n  );\n};\n\nconst mapState = (state: AppState) => ({\n  session: state.console.session,\n  loadingBucket: state.buckets.bucketDetails.loadingBucket,\n  bucketInfo: state.buckets.bucketDetails.bucketInfo,\n});\n\nconst connector = connect(mapState, {\n  setErrorSnackMessage,\n});\n\nexport default withStyles(styles)(connector(BucketEventsPanel));\n","// This file is part of MinIO Console Server\n// Copyright (c) 2021 MinIO, Inc.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport React from \"react\";\nimport { Theme } from \"@mui/material/styles\";\nimport createStyles from \"@mui/styles/createStyles\";\nimport withStyles from \"@mui/styles/withStyles\";\nimport { IconButtonProps } from \"@mui/material\";\n\nconst styles = (theme: Theme) =>\n  createStyles({\n    root: {\n      padding: 0,\n      margin: 0,\n      fontSize: \".9rem\",\n    },\n  });\n\ninterface IPanelTitle extends IconButtonProps {\n  classes: any;\n  children: any;\n}\n\nconst PanelTitle = ({ classes, children }: IPanelTitle) => {\n  return <h1 className={classes.root}>{children}</h1>;\n};\n\nexport default withStyles(styles)(PanelTitle);\n"],"names":["withStyles","theme","createStyles","root","border","borderRadius","backgroundColor","paddingLeft","paddingTop","paddingBottom","paddingRight","leftItems","fontSize","fontWeight","marginBottom","display","alignItems","marginRight","height","width","helpText","classes","iconComponent","title","help","className","container","item","xs","DeleteEvent","withSuspense","React","AddEvent","connector","connect","state","session","console","loadingBucket","buckets","bucketDetails","bucketInfo","setErrorSnackMessage","searchField","actionsTray","twHeight","minHeight","match","useState","addEventScreenOpen","setAddEventScreenOpen","loadingEvents","setLoadingEvents","records","setRecords","deleteOpen","setDeleteOpen","selectedEvent","setSelectedEvent","bucketName","params","displayEvents","hasPermission","IAM_SCOPES","useEffect","api","then","res","events","get","catch","err","tableActions","type","onClick","evnt","Fragment","selectedBucket","bucketEvent","closeDeleteModalAndRefresh","refresh","open","closeModalAndRefresh","scopes","resource","matchAll","errorProps","disabled","tooltip","text","icon","color","variant","itemActions","columns","label","elementKey","renderFunction","join","isLoading","entityName","idField","customPaperHeight","href","target","rel","padding","margin","children"],"sourceRoot":""}